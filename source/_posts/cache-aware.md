---
title: cache-aware
date: 2017-12-02 17:25:20
tags: 
---

cache aware算法用于避免cache misses，更有效的利用缓存。
cache aware算法显式利用CPU的cache行为，会考虑和CPU关系更密切的底层机制。
cache oblivious也会更好的利用缓存，但代码不是那么底层。
典型的例子，二维数组按行遍历和按列遍历。

写缓存策略:
+ nowrite： 不缓存任何写操作，当进行写时，跳过缓存，直接写入磁盘，并且标记缓存失效。
+ write-through cache： 写操作更新缓存，同时更新磁盘，但是不标记缓存为失效。
+ write-back： 写操作写入缓存，但是不直接更新到磁盘，而是酱缓存页面标记为脏，并加入到脏页列表中。然后回写进程将脏页列表中的页写回到磁盘，最后清理脏标记。

缓存一致性：
所有写内存的操作在共享总线上进行，所以各缓存都可以snooping到，由于一个时钟周期只有一个缓存可以读写内存，所以当某个处理器写内存时，其他处理器就可以使其对应的缓存失效。
若在混写模式，写缓存不一定马上写内存，这时需要使用MESI（Modified，Exclusive，Shared，Invalid）协议。处理器修改缓存前需要独占该缓存，其他处理器的该缓存副本失效。




